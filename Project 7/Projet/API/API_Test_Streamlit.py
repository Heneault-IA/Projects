import streamlit as st
import requests
import numpy as np
import pandas as pd
from bs4 import BeautifulSoup

# URL de l'API
api_url = "https://home-credi-default-risk-2d75b983d33b.herokuapp.com"

data = {'SK_ID_CURR' : {0: 442479, 1: 437689, 2: 295534, 3: 123707},
    'NAME_CONTRACT_TYPE': {0: 0, 1: 0, 2: 0, 3: 0},
 'FLAG_OWN_CAR': {0: 0, 1: 1, 2: 0, 3: 1},
 'FLAG_OWN_REALTY': {0: 1, 1: 1, 2: 1, 3: 1},
 'CNT_CHILDREN': {0: 0, 1: 0, 2: 0, 3: 2},
 'AMT_INCOME_TOTAL': {0: 135000.0, 1: 67500.0, 2: 90000.0, 3: 225000.0},
 'AMT_CREDIT': {0: 369720.0, 1: 289597.5, 2: 1073835.0, 3: 882000.0},
 'AMT_ANNUITY': {0: 23778.0, 1: 13932.0, 2: 37453.5, 3: 45162.0},
 'AMT_GOODS_PRICE': {0: 292500.0, 1: 234000.0, 2: 927000.0, 3: 882000.0},
 'REGION_POPULATION_RELATIVE': {0: 0.0031219999999999,
  1: 0.0096569999999999,
  2: 0.018029,
  3: 0.030755},
 'DAYS_BIRTH_x': {0: 10662, 1: 17067, 2: 23690, 3: 17821},
 'DAYS_EMPLOYED': {0: -3630.0, 1: -4473.0, 2: np.nan, 3: -1317.0},
 'DAYS_REGISTRATION': {0: -2358.0, 1: -5939.0, 2: -4255.0, 3: -5299.0},
 'DAYS_ID_PUBLISH': {0: -3234, 1: -620, 2: -4763, 3: -1380},
 'OWN_CAR_AGE': {0: np.nan, 1: 15.0, 2: np.nan, 3: 3.0},
 'FLAG_MOBIL': {0: 1, 1: 1, 2: 1, 3: 1},
 'FLAG_EMP_PHONE': {0: 1, 1: 1, 2: 0, 3: 1},
 'FLAG_WORK_PHONE': {0: 0, 1: 0, 2: 0, 3: 0},
 'FLAG_CONT_MOBILE': {0: 1, 1: 1, 2: 1, 3: 1},
 'FLAG_PHONE': {0: 0, 1: 1, 2: 1, 3: 0},
 'FLAG_EMAIL': {0: 0, 1: 0, 2: 1, 3: 0},
 'CNT_FAM_MEMBERS': {0: 2.0, 1: 2.0, 2: 2.0, 3: 4.0},
 'REGION_RATING_CLIENT': {0: 3, 1: 2, 2: 3, 3: 2},
 'REGION_RATING_CLIENT_W_CITY': {0: 3, 1: 2, 2: 2, 3: 2},
 'HOUR_APPR_PROCESS_START': {0: 9, 1: 11, 2: 8, 3: 15},
 'REG_REGION_NOT_LIVE_REGION': {0: 0, 1: 0, 2: 0, 3: 0},
 'REG_REGION_NOT_WORK_REGION': {0: 1, 1: 0, 2: 0, 3: 0},
 'LIVE_REGION_NOT_WORK_REGION': {0: 1, 1: 0, 2: 0, 3: 0},
 'REG_CITY_NOT_LIVE_CITY': {0: 0, 1: 0, 2: 0, 3: 0},
 'REG_CITY_NOT_WORK_CITY': {0: 1, 1: 0, 2: 0, 3: 0},
 'LIVE_CITY_NOT_WORK_CITY': {0: 1, 1: 0, 2: 0, 3: 0},
 'EXT_SOURCE_1_x': {0: 0.5074097876943425,
  1: 0.4127292678433565,
  2: np.nan,
  3: np.nan},
 'EXT_SOURCE_2_x': {0: 0.4695725190353722,
  1: 0.2127005211478608,
  2: 0.2518770396779223,
  3: 0.5438970850318561},
 'EXT_SOURCE_3_x': {0: np.nan,
  1: 0.7407990879702335,
  2: 0.7981372313187245,
  3: 0.5585066276769286},
 'APARTMENTS_AVG': {0: np.nan, 1: np.nan, 2: 0.067, 3: 0.1495},
 'BASEMENTAREA_AVG': {0: np.nan, 1: np.nan, 2: 0.0346, 3: 0.1069},
 'YEARS_BEGINEXPLUATATION_AVG': {0: np.nan, 1: np.nan, 2: 0.9881, 3: 0.9791},
 'YEARS_BUILD_AVG': {0: np.nan, 1: np.nan, 2: 0.8368, 3: 0.7144},
 'COMMONAREA_AVG': {0: np.nan, 1: np.nan, 2: 0.0222, 3: 0.0752},
 'ELEVATORS_AVG': {0: np.nan, 1: np.nan, 2: 0.08, 3: 0.16},
 'ENTRANCES_AVG': {0: np.nan, 1: np.nan, 2: 0.0345, 3: 0.1379},
 'FLOORSMAX_AVG': {0: np.nan, 1: np.nan, 2: 0.5417, 3: 0.3333},
 'FLOORSMIN_AVG': {0: np.nan, 1: np.nan, 2: 0.5833, 3: 0.375},
 'LANDAREA_AVG': {0: np.nan, 1: np.nan, 2: 0.0291, 3: 0.0411},
 'LIVINGAPARTMENTS_AVG': {0: np.nan, 1: np.nan, 2: 0.0546, 3: 0.121},
 'LIVINGAREA_AVG': {0: np.nan, 1: np.nan, 2: 0.0771, 3: 0.1465},
 'NONLIVINGAPARTMENTS_AVG': {0: np.nan, 1: np.nan, 2: 0.0, 3: 0.0039},
 'NONLIVINGAREA_AVG': {0: np.nan, 1: np.nan, 2: 0.0, 3: 0.0041},
 'APARTMENTS_MODE': {0: np.nan, 1: np.nan, 2: 0.0683, 3: 0.1523},
 'BASEMENTAREA_MODE': {0: np.nan, 1: np.nan, 2: 0.036, 3: 0.111},
 'YEARS_BEGINEXPLUATATION_MODE': {0: np.nan, 1: np.nan, 2: 0.9881, 3: 0.9791},
 'YEARS_BUILD_MODE': {0: np.nan, 1: np.nan, 2: 0.8432, 3: 0.7256},
 'COMMONAREA_MODE': {0: np.nan, 1: np.nan, 2: 0.0224, 3: 0.0759},
 'ELEVATORS_MODE': {0: np.nan, 1: np.nan, 2: 0.0806, 3: 0.1611},
 'ENTRANCES_MODE': {0: np.nan, 1: np.nan, 2: 0.0345, 3: 0.1379},
 'FLOORSMAX_MODE': {0: np.nan, 1: np.nan, 2: 0.5417, 3: 0.3333},
 'FLOORSMIN_MODE': {0: np.nan, 1: np.nan, 2: 0.5833, 3: 0.375},
 'LANDAREA_MODE': {0: np.nan, 1: np.nan, 2: 0.0297, 3: 0.042},
 'LIVINGAPARTMENTS_MODE': {0: np.nan, 1: np.nan, 2: 0.0597, 3: 0.1322},
 'LIVINGAREA_MODE': {0: np.nan, 1: np.nan, 2: 0.0803, 3: 0.1526},
 'NONLIVINGAPARTMENTS_MODE': {0: np.nan, 1: np.nan, 2: 0.0, 3: 0.0039},
 'NONLIVINGAREA_MODE': {0: np.nan, 1: np.nan, 2: 0.0, 3: 0.0044},
 'APARTMENTS_MEDI': {0: np.nan, 1: np.nan, 2: 0.0677, 3: 0.1509},
 'BASEMENTAREA_MEDI': {0: np.nan, 1: np.nan, 2: 0.0346, 3: 0.1069},
 'YEARS_BEGINEXPLUATATION_MEDI': {0: np.nan, 1: np.nan, 2: 0.9881, 3: 0.9791},
 'YEARS_BUILD_MEDI': {0: np.nan, 1: np.nan, 2: 0.8390000000000001, 3: 0.7182},
 'COMMONAREA_MEDI': {0: np.nan, 1: np.nan, 2: 0.0223, 3: 0.0757},
 'ELEVATORS_MEDI': {0: np.nan, 1: np.nan, 2: 0.08, 3: 0.16},
 'ENTRANCES_MEDI': {0: np.nan, 1: np.nan, 2: 0.0345, 3: 0.1379},
 'FLOORSMAX_MEDI': {0: np.nan, 1: np.nan, 2: 0.5417, 3: 0.3333},
 'FLOORSMIN_MEDI': {0: np.nan, 1: np.nan, 2: 0.5833, 3: 0.375},
 'LANDAREA_MEDI': {0: np.nan, 1: np.nan, 2: 0.0296, 3: 0.0418},
 'LIVINGAPARTMENTS_MEDI': {0: np.nan, 1: np.nan, 2: 0.0556, 3: 0.1231},
 'LIVINGAREA_MEDI': {0: np.nan, 1: np.nan, 2: 0.0785, 3: 0.1491},
 'NONLIVINGAPARTMENTS_MEDI': {0: np.nan, 1: np.nan, 2: 0.0, 3: 0.0039},
 'NONLIVINGAREA_MEDI': {0: np.nan, 1: np.nan, 2: 0.0, 3: 0.0042},
 'TOTALAREA_MODE': {0: np.nan, 1: np.nan, 2: 0.0847, 3: 0.1572},
 'OBS_30_CNT_SOCIAL_CIRCLE': {0: 0.0, 1: 0.0, 2: 1.0, 3: 0.0},
 'DEF_30_CNT_SOCIAL_CIRCLE': {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0},
 'OBS_60_CNT_SOCIAL_CIRCLE': {0: 0.0, 1: 0.0, 2: 1.0, 3: 0.0},
 'DEF_60_CNT_SOCIAL_CIRCLE': {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0},
 'DAYS_LAST_PHONE_CHANGE': {0: -2812.0, 1: -2098.0, 2: -2143.0, 3: -595.0},
 'FLAG_DOCUMENT_2': {0: 0, 1: 0, 2: 0, 3: 0},
 'FLAG_DOCUMENT_3': {0: 1, 1: 1, 2: 1, 3: 0},
 'FLAG_DOCUMENT_4': {0: 0, 1: 0, 2: 0, 3: 0},
 'FLAG_DOCUMENT_5': {0: 0, 1: 0, 2: 0, 3: 0},
 'FLAG_DOCUMENT_6': {0: 0, 1: 0, 2: 0, 3: 0},
 'FLAG_DOCUMENT_7': {0: 0, 1: 0, 2: 0, 3: 0},
 'FLAG_DOCUMENT_8': {0: 0, 1: 0, 2: 0, 3: 1},
 'FLAG_DOCUMENT_9': {0: 0, 1: 0, 2: 0, 3: 0},
 'FLAG_DOCUMENT_10': {0: 0, 1: 0, 2: 0, 3: 0},
 'FLAG_DOCUMENT_11': {0: 0, 1: 0, 2: 0, 3: 0},
 'FLAG_DOCUMENT_12': {0: 0, 1: 0, 2: 0, 3: 0},
 'FLAG_DOCUMENT_13': {0: 0, 1: 0, 2: 0, 3: 0},
 'FLAG_DOCUMENT_14': {0: 0, 1: 0, 2: 0, 3: 0},
 'FLAG_DOCUMENT_15': {0: 0, 1: 0, 2: 0, 3: 0},
 'FLAG_DOCUMENT_16': {0: 0, 1: 0, 2: 0, 3: 0},
 'FLAG_DOCUMENT_17': {0: 0, 1: 0, 2: 0, 3: 0},
 'FLAG_DOCUMENT_18': {0: 0, 1: 0, 2: 0, 3: 0},
 'FLAG_DOCUMENT_19': {0: 0, 1: 0, 2: 0, 3: 0},
 'FLAG_DOCUMENT_20': {0: 0, 1: 0, 2: 0, 3: 0},
 'FLAG_DOCUMENT_21': {0: 0, 1: 0, 2: 0, 3: 0},
 'AMT_REQ_CREDIT_BUREAU_HOUR': {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0},
 'AMT_REQ_CREDIT_BUREAU_DAY': {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0},
 'AMT_REQ_CREDIT_BUREAU_WEEK': {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0},
 'AMT_REQ_CREDIT_BUREAU_MON': {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0},
 'AMT_REQ_CREDIT_BUREAU_QRT': {0: 0.0, 1: 0.0, 2: 1.0, 3: 0.0},
 'AMT_REQ_CREDIT_BUREAU_YEAR': {0: 4.0, 1: 2.0, 2: 4.0, 3: 1.0},
 'CODE_GENDER_F': {0: True, 1: True, 2: True, 3: False},
 'CODE_GENDER_M': {0: False, 1: False, 2: False, 3: True},
 'CODE_GENDER_XNA': {0: False, 1: False, 2: False, 3: False},
 'CODE_GENDER_nan': {0: False, 1: False, 2: False, 3: False},
 'NAME_TYPE_SUITE_Children': {0: False, 1: False, 2: False, 3: False},
 'NAME_TYPE_SUITE_Family': {0: False, 1: True, 2: False, 3: False},
 'NAME_TYPE_SUITE_Group of people': {0: False, 1: False, 2: False, 3: False},
 'NAME_TYPE_SUITE_Other_A': {0: False, 1: False, 2: False, 3: False},
 'NAME_TYPE_SUITE_Other_B': {0: False, 1: False, 2: False, 3: False},
 'NAME_TYPE_SUITE_Spouse, partner': {0: False, 1: False, 2: False, 3: False},
 'NAME_TYPE_SUITE_Unaccompanied': {0: True, 1: False, 2: True, 3: True},
 'NAME_TYPE_SUITE_nan': {0: False, 1: False, 2: False, 3: False},
 'NAME_INCOME_TYPE_Businessman': {0: False, 1: False, 2: False, 3: False},
 'NAME_INCOME_TYPE_Commercial associate': {0: False,
  1: False,
  2: False,
  3: False},
 'NAME_INCOME_TYPE_Maternity leave': {0: False, 1: False, 2: False, 3: False},
 'NAME_INCOME_TYPE_Pensioner': {0: False, 1: False, 2: True, 3: False},
 'NAME_INCOME_TYPE_State servant': {0: False, 1: False, 2: False, 3: False},
 'NAME_INCOME_TYPE_Student': {0: False, 1: False, 2: False, 3: False},
 'NAME_INCOME_TYPE_Unemployed': {0: False, 1: False, 2: False, 3: False},
 'NAME_INCOME_TYPE_Working': {0: True, 1: True, 2: False, 3: True},
 'NAME_INCOME_TYPE_nan': {0: False, 1: False, 2: False, 3: False},
 'NAME_EDUCATION_TYPE_Academic degree': {0: False,
  1: False,
  2: False,
  3: False},
 'NAME_EDUCATION_TYPE_Higher education': {0: False,
  1: False,
  2: False,
  3: False},
 'NAME_EDUCATION_TYPE_Incomplete higher': {0: False,
  1: False,
  2: False,
  3: False},
 'NAME_EDUCATION_TYPE_Lower secondary': {0: False,
  1: False,
  2: False,
  3: False},
 'NAME_EDUCATION_TYPE_Secondary / secondary special': {0: True,
  1: True,
  2: True,
  3: True},
 'NAME_EDUCATION_TYPE_nan': {0: False, 1: False, 2: False, 3: False},
 'NAME_FAMILY_STATUS_Civil marriage': {0: True, 1: False, 2: False, 3: False},
 'NAME_FAMILY_STATUS_Married': {0: False, 1: True, 2: True, 3: True},
 'NAME_FAMILY_STATUS_Separated': {0: False, 1: False, 2: False, 3: False},
 'NAME_FAMILY_STATUS_Single / not married': {0: False,
  1: False,
  2: False,
  3: False},
 'NAME_FAMILY_STATUS_Unknown': {0: False, 1: False, 2: False, 3: False},
 'NAME_FAMILY_STATUS_Widow': {0: False, 1: False, 2: False, 3: False},
 'NAME_FAMILY_STATUS_nan': {0: False, 1: False, 2: False, 3: False},
 'NAME_HOUSING_TYPE_Co-op apartment': {0: False, 1: False, 2: False, 3: False},
 'NAME_HOUSING_TYPE_House / apartment': {0: True, 1: True, 2: True, 3: True},
 'NAME_HOUSING_TYPE_Municipal apartment': {0: False,
  1: False,
  2: False,
  3: False},
 'NAME_HOUSING_TYPE_Office apartment': {0: False,
  1: False,
  2: False,
  3: False},
 'NAME_HOUSING_TYPE_Rented apartment': {0: False,
  1: False,
  2: False,
  3: False},
 'NAME_HOUSING_TYPE_With parents': {0: False, 1: False, 2: False, 3: False},
 'NAME_HOUSING_TYPE_nan': {0: False, 1: False, 2: False, 3: False},
 'OCCUPATION_TYPE_Accountants': {0: False, 1: False, 2: False, 3: False},
 'OCCUPATION_TYPE_Cleaning staff': {0: False, 1: False, 2: False, 3: False},
 'OCCUPATION_TYPE_Cooking staff': {0: False, 1: False, 2: False, 3: False},
 'OCCUPATION_TYPE_Core staff': {0: False, 1: False, 2: False, 3: False},
 'OCCUPATION_TYPE_Drivers': {0: False, 1: False, 2: False, 3: False},
 'OCCUPATION_TYPE_HR staff': {0: False, 1: False, 2: False, 3: False},
 'OCCUPATION_TYPE_High skill tech staff': {0: False,
  1: False,
  2: False,
  3: False},
 'OCCUPATION_TYPE_IT staff': {0: False, 1: False, 2: False, 3: False},
 'OCCUPATION_TYPE_Laborers': {0: False, 1: True, 2: False, 3: False},
 'OCCUPATION_TYPE_Low-skill Laborers': {0: False,
  1: False,
  2: False,
  3: False},
 'OCCUPATION_TYPE_Managers': {0: False, 1: False, 2: False, 3: True},
 'OCCUPATION_TYPE_Medicine staff': {0: False, 1: False, 2: False, 3: False},
 'OCCUPATION_TYPE_Private service staff': {0: False,
  1: False,
  2: False,
  3: False},
 'OCCUPATION_TYPE_Realty agents': {0: False, 1: False, 2: False, 3: False},
 'OCCUPATION_TYPE_Sales staff': {0: True, 1: False, 2: False, 3: False},
 'OCCUPATION_TYPE_Secretaries': {0: False, 1: False, 2: False, 3: False},
 'OCCUPATION_TYPE_Security staff': {0: False, 1: False, 2: False, 3: False},
 'OCCUPATION_TYPE_Waiters/barmen staff': {0: False,
  1: False,
  2: False,
  3: False},
 'OCCUPATION_TYPE_nan': {0: False, 1: False, 2: True, 3: False},
 'WEEKDAY_APPR_PROCESS_START_FRIDAY': {0: False, 1: False, 2: False, 3: False},
 'WEEKDAY_APPR_PROCESS_START_MONDAY': {0: False, 1: False, 2: False, 3: False},
 'WEEKDAY_APPR_PROCESS_START_SATURDAY': {0: False,
  1: True,
  2: False,
  3: False},
 'WEEKDAY_APPR_PROCESS_START_SUNDAY': {0: False, 1: False, 2: False, 3: False},
 'WEEKDAY_APPR_PROCESS_START_THURSDAY': {0: False,
  1: False,
  2: True,
  3: False},
 'WEEKDAY_APPR_PROCESS_START_TUESDAY': {0: True, 1: False, 2: False, 3: False},
 'WEEKDAY_APPR_PROCESS_START_WEDNESDAY': {0: False,
  1: False,
  2: False,
  3: True},
 'WEEKDAY_APPR_PROCESS_START_nan': {0: False, 1: False, 2: False, 3: False},
 'ORGANIZATION_TYPE_Advertising': {0: False, 1: False, 2: False, 3: False},
 'ORGANIZATION_TYPE_Agriculture': {0: False, 1: False, 2: False, 3: False},
 'ORGANIZATION_TYPE_Bank': {0: False, 1: False, 2: False, 3: False},
 'ORGANIZATION_TYPE_Business Entity Type 1': {0: False,
  1: False,
  2: False,
  3: False},
 'ORGANIZATION_TYPE_Business Entity Type 2': {0: False,
  1: False,
  2: False,
  3: False},
 'ORGANIZATION_TYPE_Business Entity Type 3': {0: False,
  1: False,
  2: False,
  3: False},
 'ORGANIZATION_TYPE_Cleaning': {0: False, 1: False, 2: False, 3: False},
 'ORGANIZATION_TYPE_Construction': {0: False, 1: False, 2: False, 3: True},
 'ORGANIZATION_TYPE_Culture': {0: False, 1: False, 2: False, 3: False},
 'ORGANIZATION_TYPE_Electricity': {0: False, 1: False, 2: False, 3: False},
 'ORGANIZATION_TYPE_Emergency': {0: False, 1: False, 2: False, 3: False},
 'ORGANIZATION_TYPE_Government': {0: False, 1: False, 2: False, 3: False},
 'ORGANIZATION_TYPE_Hotel': {0: False, 1: False, 2: False, 3: False},
 'ORGANIZATION_TYPE_Housing': {0: False, 1: False, 2: False, 3: False},
 'ORGANIZATION_TYPE_Industry: type 1': {0: False,
  1: False,
  2: False,
  3: False},
 'ORGANIZATION_TYPE_Industry: type 10': {0: False,
  1: False,
  2: False,
  3: False},
 'ORGANIZATION_TYPE_Industry: type 11': {0: False,
  1: False,
  2: False,
  3: False},
 'ORGANIZATION_TYPE_Industry: type 12': {0: False,
  1: False,
  2: False,
  3: False},
 'ORGANIZATION_TYPE_Industry: type 13': {0: False,
  1: False,
  2: False,
  3: False},
 'ORGANIZATION_TYPE_Industry: type 2': {0: False,
  1: False,
  2: False,
  3: False},
 'ORGANIZATION_TYPE_Industry: type 3': {0: False,
  1: False,
  2: False,
  3: False},
 'ORGANIZATION_TYPE_Industry: type 4': {0: False,
  1: False,
  2: False,
  3: False},
 'ORGANIZATION_TYPE_Industry: type 5': {0: False,
  1: False,
  2: False,
  3: False},
 'ORGANIZATION_TYPE_Industry: type 6': {0: False,
  1: False,
  2: False,
  3: False},
 'ORGANIZATION_TYPE_Industry: type 7': {0: False,
  1: False,
  2: False,
  3: False},
 'ORGANIZATION_TYPE_Industry: type 8': {0: False,
  1: False,
  2: False,
  3: False},
 'ORGANIZATION_TYPE_Industry: type 9': {0: False,
  1: False,
  2: False,
  3: False},
 'ORGANIZATION_TYPE_Insurance': {0: False, 1: False, 2: False, 3: False},
 'ORGANIZATION_TYPE_Kindergarten': {0: False, 1: False, 2: False, 3: False},
 'ORGANIZATION_TYPE_Legal Services': {0: False, 1: False, 2: False, 3: False},
 'ORGANIZATION_TYPE_Medicine': {0: False, 1: False, 2: False, 3: False},
 'ORGANIZATION_TYPE_Military': {0: False, 1: False, 2: False, 3: False},
 'ORGANIZATION_TYPE_Mobile': {0: False, 1: False, 2: False, 3: False},
 'ORGANIZATION_TYPE_Other': {0: False, 1: False, 2: False, 3: False},
 'ORGANIZATION_TYPE_Police': {0: False, 1: False, 2: False, 3: False},
 'ORGANIZATION_TYPE_Postal': {0: False, 1: False, 2: False, 3: False},
 'ORGANIZATION_TYPE_Realtor': {0: False, 1: False, 2: False, 3: False},
 'ORGANIZATION_TYPE_Religion': {0: False, 1: False, 2: False, 3: False},
 'ORGANIZATION_TYPE_Restaurant': {0: False, 1: False, 2: False, 3: False},
 'ORGANIZATION_TYPE_School': {0: False, 1: False, 2: False, 3: False},
 'ORGANIZATION_TYPE_Security': {0: False, 1: False, 2: False, 3: False},
 'ORGANIZATION_TYPE_Security Ministries': {0: False,
  1: False,
  2: False,
  3: False},
 'ORGANIZATION_TYPE_Self-employed': {0: False, 1: True, 2: False, 3: False},
 'ORGANIZATION_TYPE_Services': {0: False, 1: False, 2: False, 3: False},
 'ORGANIZATION_TYPE_Telecom': {0: False, 1: False, 2: False, 3: False},
 'ORGANIZATION_TYPE_Trade: type 1': {0: False, 1: False, 2: False, 3: False},
 'ORGANIZATION_TYPE_Trade: type 2': {0: False, 1: False, 2: False, 3: False},
 'ORGANIZATION_TYPE_Trade: type 3': {0: True, 1: False, 2: False, 3: False},
 'ORGANIZATION_TYPE_Trade: type 4': {0: False, 1: False, 2: False, 3: False},
 'ORGANIZATION_TYPE_Trade: type 5': {0: False, 1: False, 2: False, 3: False},
 'ORGANIZATION_TYPE_Trade: type 6': {0: False, 1: False, 2: False, 3: False},
 'ORGANIZATION_TYPE_Trade: type 7': {0: False, 1: False, 2: False, 3: False},
 'ORGANIZATION_TYPE_Transport: type 1': {0: False,
  1: False,
  2: False,
  3: False},
 'ORGANIZATION_TYPE_Transport: type 2': {0: False,
  1: False,
  2: False,
  3: False},
 'ORGANIZATION_TYPE_Transport: type 3': {0: False,
  1: False,
  2: False,
  3: False},
 'ORGANIZATION_TYPE_Transport: type 4': {0: False,
  1: False,
  2: False,
  3: False},
 'ORGANIZATION_TYPE_University': {0: False, 1: False, 2: False, 3: False},
 'ORGANIZATION_TYPE_XNA': {0: False, 1: False, 2: True, 3: False},
 'ORGANIZATION_TYPE_nan': {0: False, 1: False, 2: False, 3: False},
 'FONDKAPREMONT_MODE_not specified': {0: False, 1: False, 2: False, 3: False},
 'FONDKAPREMONT_MODE_org spec account': {0: False,
  1: False,
  2: False,
  3: False},
 'FONDKAPREMONT_MODE_reg oper account': {0: False,
  1: False,
  2: True,
  3: False},
 'FONDKAPREMONT_MODE_reg oper spec account': {0: False,
  1: False,
  2: False,
  3: True},
 'FONDKAPREMONT_MODE_nan': {0: True, 1: True, 2: False, 3: False},
 'HOUSETYPE_MODE_block of flats': {0: False, 1: False, 2: True, 3: True},
 'HOUSETYPE_MODE_specific housing': {0: False, 1: False, 2: False, 3: False},
 'HOUSETYPE_MODE_terraced house': {0: False, 1: False, 2: False, 3: False},
 'HOUSETYPE_MODE_nan': {0: True, 1: True, 2: False, 3: False},
 'WALLSMATERIAL_MODE_Block': {0: False, 1: False, 2: False, 3: False},
 'WALLSMATERIAL_MODE_Mixed': {0: False, 1: False, 2: False, 3: False},
 'WALLSMATERIAL_MODE_Monolithic': {0: False, 1: False, 2: False, 3: False},
 'WALLSMATERIAL_MODE_Others': {0: False, 1: False, 2: False, 3: False},
 'WALLSMATERIAL_MODE_Panel': {0: False, 1: False, 2: False, 3: True},
 'WALLSMATERIAL_MODE_Stone, brick': {0: False, 1: False, 2: True, 3: False},
 'WALLSMATERIAL_MODE_Wooden': {0: False, 1: False, 2: False, 3: False},
 'WALLSMATERIAL_MODE_nan': {0: True, 1: True, 2: False, 3: False},
 'EMERGENCYSTATE_MODE_No': {0: False, 1: False, 2: True, 3: True},
 'EMERGENCYSTATE_MODE_Yes': {0: False, 1: False, 2: False, 3: False},
 'EMERGENCYSTATE_MODE_nan': {0: True, 1: True, 2: False, 3: False},
 'DAYS_EMPLOYED_ANOM': {0: False, 1: False, 2: True, 3: False},
 'DAYS_EMPLOYED_PERC': {0: -0.3404614518851998,
  1: -0.2620847249077166,
  2: np.nan,
  3: -0.0739015767914258},
 'INCOME_CREDIT_PERC': {0: 0.365141187925998,
  1: 0.2330821226011964,
  2: 0.0838117587897582,
  3: 0.2551020408163265},
 'INCOME_PER_PERSON': {0: 67500.0, 1: 33750.0, 2: 45000.0, 3: 56250.0},
 'ANNUITY_INCOME_PERC': {0: 0.1761333333333333,
  1: 0.2064,
  2: 0.41615,
  3: 0.20072},
 'PAYMENT_RATE': {0: 0.0643135345666991,
  1: 0.0481081501048869,
  2: 0.0348782634203578,
  3: 0.051204081632653},
 '1': {0: 1.0, 1: 1.0, 2: 1.0, 3: 1.0},
 'EXT_SOURCE_1_y': {0: 0.5074097876943425,
  1: 0.4127292678433565,
  2: 0.5061548086628039,
  3: 0.5061548086628039},
 'EXT_SOURCE_2_y': {0: 0.4695725190353722,
  1: 0.2127005211478608,
  2: 0.2518770396779223,
  3: 0.5438970850318561},
 'EXT_SOURCE_3_y': {0: 0.5334816299804352,
  1: 0.7407990879702335,
  2: 0.7981372313187245,
  3: 0.5585066276769286},
 'DAYS_BIRTH_y': {0: 10662.0, 1: 17067.0, 2: 23690.0, 3: 17821.0},
 'EXT_SOURCE_1^2': {0: 0.2574646926480177,
  1: 0.1703454485345131,
  2: 0.2561926903324796,
  3: 0.2561926903324796},
 'EXT_SOURCE_1 EXT_SOURCE_2': {0: 0.2382656921908358,
  1: 0.0877877303632569,
  2: 0.1274887748247322,
  3: 0.2752961250065559},
 'EXT_SOURCE_1 EXT_SOURCE_3': {0: 0.2706938006072044,
  1: 0.3057494651969807,
  2: 0.403980997604789,
  3: 0.2826908152687237},
 'EXT_SOURCE_1 DAYS_BIRTH': {0: 5410.00315639708,
  1: 7044.050414282566,
  2: 11990.807417221826,
  3: 9020.184845179829},
 'EXT_SOURCE_2^2': {0: 0.220498350633225,
  1: 0.0452415116965715,
  2: 0.0634420431169136,
  3: 0.29582403910615},
 'EXT_SOURCE_2 EXT_SOURCE_3': {0: 0.2505083128490093,
  1: 0.1575683520771286,
  2: 0.2010324430812934,
  3: 0.3037701267644536},
 'EXT_SOURCE_2 DAYS_BIRTH': {0: 5006.582197955138,
  1: 3630.159794430541,
  2: 5966.967069969979,
  3: 9692.789952352708},
 'EXT_SOURCE_3^2': {0: 0.284602649526582,
  1: 0.5487832887375298,
  2: 0.6370230400171192,
  3: 0.3119296531590553},
 'EXT_SOURCE_3 DAYS_BIRTH': {0: 5687.981138851401,
  1: 12643.218034387975,
  2: 18907.871009940583,
  3: 9953.146611830543},
 'DAYS_BIRTH^2': {0: 113678244.0,
  1: 291282489.0,
  2: 561216100.0,
  3: 317588041.0},
 'EXT_SOURCE_1^3': {0: 0.1306401050353198,
  1: 0.0703065522540977,
  2: 0.1296731621560452,
  3: 0.1296731621560452},
 'EXT_SOURCE_1^2 EXT_SOURCE_2': {0: 0.1208983442893975,
  1: 0.036232565678457,
  2: 0.0645290564280676,
  3: 0.1393424574783046},
 'EXT_SOURCE_1^2 EXT_SOURCE_3': {0: 0.1373526838962763,
  1: 0.1261917529142476,
  2: 0.2044769245460606,
  3: 0.1430853155130729},
 'EXT_SOURCE_1^2 DAYS_BIRTH': {0: 2745.088553013165,
  1: 2907.285770138536,
  2: 6069.204833976443,
  3: 4565.60993441512},
 'EXT_SOURCE_1 EXT_SOURCE_2^2': {0: 0.1118830212817574,
  1: 0.0186724959986526,
  2: 0.0321114951950187,
  3: 0.1497327599116312},
 'EXT_SOURCE_1 EXT_SOURCE_2 EXT_SOURCE_3': {0: 0.1271103698383837,
  1: 0.0650330705880775,
  2: 0.1017535377628281,
  3: 0.1537547103899377},
 'EXT_SOURCE_1 EXT_SOURCE_2 DAYS_BIRTH': {0: 2540.3888101386915,
  1: 1498.2731941097063,
  2: 3020.2090755979066,
  3: 4906.052243741833},
 'EXT_SOURCE_1 EXT_SOURCE_3^2': {0: 0.1444101699735303,
  1: 0.22649892496531,
  2: 0.3224322749336626,
  3: 0.1578846939109764},
 'EXT_SOURCE_1 EXT_SOURCE_3 DAYS_BIRTH': {0: 2886.137302074014,
  1: 5218.22612251687,
  2: 9570.309833257454,
  3: 5037.833018903925},
 'EXT_SOURCE_1 DAYS_BIRTH^2': {0: 57681453.65350567,
  1: 120220808.42056054,
  2: 284062227.713985,
  3: 160748714.12594974},
 'EXT_SOURCE_2^3': {0: 0.1035399659499882,
  1: 0.0096228931153778,
  2: 0.0159795940114073,
  3: 0.1608978325521848},
 'EXT_SOURCE_2^2 EXT_SOURCE_3': {0: 0.1176318195038104,
  1: 0.0335148706032148,
  2: 0.0506354566425366,
  3: 0.1652196864669437},
 'EXT_SOURCE_2^2 DAYS_BIRTH': {0: 2350.953414451445,
  1: 772.1368801253872,
  2: 1502.9420014396842,
  3: 5271.8802009107},
 'EXT_SOURCE_2 EXT_SOURCE_3^2': {0: 0.1336415830623383,
  1: 0.1167264915117095,
  2: 0.1604514775261426,
  3: 0.1696576290882081},
 'EXT_SOURCE_2 EXT_SOURCE_3 DAYS_BIRTH': {0: 2670.9196315961376,
  1: 2689.2190649003546,
  2: 4762.458576595841,
  3: 5413.487429069328},
 'EXT_SOURCE_2 DAYS_BIRTH^2': {0: 53380179.39459769,
  1: 61955937.21154603,
  2: 141357449.8875888,
  3: 172735209.7408776},
 'EXT_SOURCE_3^3': {0: 0.1518302853661915,
  1: 0.4065381597900674,
  2: 0.5084318054455006,
  3: 0.174214778658298},
 'EXT_SOURCE_3^2 DAYS_BIRTH': {0: 3034.4334492524176,
  1: 9366.08438888342,
  2: 15091.075818005553,
  3: 5558.898348947526},
 'EXT_SOURCE_3 DAYS_BIRTH^2': {0: 60645254.902433634,
  1: 215781802.1928996,
  2: 447927464.2254924,
  3: 177375025.76943213},
 'DAYS_BIRTH^3': {0: 1212037437528.0,
  1: 4971318239763.0,
  2: 13295209409000.0,
  3: 5659736478661.0},
 'DAYS_CREDIT': {0: np.nan, 1: -850.0, 2: -780.0, 3: -1246.111111111111},
 'CREDIT_DAY_OVERDUE': {0: np.nan, 1: 0.0, 2: 0.0, 3: 0.0},
 'DAYS_CREDIT_ENDDATE': {0: np.nan,
  1: -639.8,
  2: 275.8333333333333,
  3: -786.1428571428571},
 'DAYS_ENDDATE_FACT': {0: np.nan, 1: -1091.3333333333333, 2: -505.75, 3: -984.0},
 'AMT_CREDIT_MAX_OVERDUE': {0: np.nan, 1: np.nan, 2: np.nan, 3: 0.0},
 'CNT_CREDIT_PROLONG': {0: np.nan, 1: 0.0, 2: 0.0, 3: 0.0},
 'AMT_CREDIT_SUM': {0: np.nan, 1: 47406.6, 2: 268640.25, 3: 234945.305},
 'AMT_CREDIT_SUM_DEBT': {0: np.nan, 1: 3158.928, 2: 132921.0, 3: 4471.3125},
 'AMT_CREDIT_SUM_LIMIT': {0: np.nan, 1: 0.0, 2: 0.0, 3: 42345.9},
 'AMT_CREDIT_SUM_OVERDUE': {0: np.nan, 1: 0.0, 2: 0.0, 3: 0.0},
 'DAYS_CREDIT_UPDATE': {0: np.nan,
  1: -609.4,
  2: -323.3333333333333,
  3: -762.7777777777778},
 'MONTHS_BALANCE': {0: np.nan, 1: 0.0, 2: 0.0, 3: 0.0},
 'CREDIT_ACTIVE_Active': {0: True, 1: False, 2: False, 3: False},
 'CREDIT_ACTIVE_Bad debt': {0: True, 1: False, 2: False, 3: False},
 'CREDIT_ACTIVE_Closed': {0: True, 1: True, 2: True, 3: True},
 'CREDIT_ACTIVE_Sold': {0: True, 1: False, 2: False, 3: False},
 'CREDIT_ACTIVE_nan': {0: True, 1: False, 2: False, 3: False},
 'CREDIT_CURRENCY_currency 1': {0: True, 1: True, 2: True, 3: True},
 'CREDIT_CURRENCY_currency 2': {0: True, 1: False, 2: False, 3: False},
 'CREDIT_CURRENCY_currency 3': {0: True, 1: False, 2: False, 3: False},
 'CREDIT_CURRENCY_nan': {0: True, 1: False, 2: False, 3: False},
 'CREDIT_TYPE_Another type of loan': {0: True, 1: False, 2: False, 3: False},
 'CREDIT_TYPE_Car loan': {0: True, 1: False, 2: False, 3: False},
 'CREDIT_TYPE_Cash loan (non-earmarked)': {0: True,
  1: False,
  2: False,
  3: False},
 'CREDIT_TYPE_Consumer credit': {0: True, 1: True, 2: True, 3: True},
 'CREDIT_TYPE_Credit card': {0: True, 1: False, 2: False, 3: False},
 'CREDIT_TYPE_Loan for business development': {0: True,
  1: False,
  2: False,
  3: False},
 'CREDIT_TYPE_Loan for the purchase of equipment': {0: True,
  1: False,
  2: False,
  3: False},
 'CREDIT_TYPE_Loan for working capital replenishment': {0: True,
  1: False,
  2: False,
  3: False},
 'CREDIT_TYPE_Microloan': {0: True, 1: False, 2: False, 3: False},
 'CREDIT_TYPE_Mortgage': {0: True, 1: False, 2: False, 3: False},
 'CREDIT_TYPE_Real estate loan': {0: True, 1: False, 2: False, 3: False},
 'CREDIT_TYPE_Unknown type of loan': {0: True, 1: False, 2: False, 3: False},
 'CREDIT_TYPE_nan': {0: True, 1: False, 2: False, 3: False},
 'STATUS_0': {0: True, 1: False, 2: False, 3: False},
 'STATUS_1': {0: True, 1: False, 2: False, 3: False},
 'STATUS_2': {0: True, 1: False, 2: False, 3: False},
 'STATUS_3': {0: True, 1: False, 2: False, 3: False},
 'STATUS_5': {0: True, 1: False, 2: False, 3: False},
 'STATUS_C': {0: True, 1: True, 2: True, 3: True},
 'STATUS_X': {0: True, 1: False, 2: False, 3: False},
 'STATUS_nan': {0: True, 1: False, 2: False, 3: False},
 'AMT_APPLICATION': {0: 84325.5, 1: 13920.0, 2: 154056.75, 3: 79447.5},
 'AMT_DOWN_PAYMENT': {0: 0.0, 1: 2137.5, 2: 3750.0, 3: 0.0},
 'NFLAG_LAST_APPL_IN_DAY': {0: 1.0, 1: 1.0, 2: 1.0, 3: 1.0},
 'RATE_DOWN_PAYMENT': {0: 0.0,
  1: 0.1037917400180384,
  2: 0.1224233256972221,
  3: 0.0},
 'RATE_INTEREST_PRIMARY': {0: np.nan, 1: np.nan, 2: np.nan, 3: np.nan},
 'RATE_INTEREST_PRIVILEGED': {0: np.nan, 1: np.nan, 2: np.nan, 3: np.nan},
 'DAYS_DECISION': {0: -1271.5,
  1: -1530.6666666666667,
  2: -1343.8333333333333,
  3: -595.0},
 'SELLERPLACE_AREA': {0: 660.75, 1: 49.0, 2: 7.666666666666667, 3: 2160.0},
 'CNT_PAYMENT': {0: 12.0, 1: 7.333333333333333, 2: 21.6, 3: 24.0},
 'DAYS_FIRST_DRAWING': {0: np.nan, 1: -619.0, 2: np.nan, 3: np.nan},
 'DAYS_FIRST_DUE': {0: -1357.3333333333333,
  1: -1489.6666666666667,
  2: -1734.25,
  3: -564.0},
 'DAYS_LAST_DUE_1ST_VERSION': {0: -907.3333333333334,
  1: -1642.0,
  2: -1404.25,
  3: 126.0},
 'DAYS_LAST_DUE': {0: -1462.0, 1: -1642.0, 2: -1509.25, 3: np.nan},
 'DAYS_TERMINATION': {0: -2536.0, 1: -1728.0, 2: -2587.0, 3: np.nan},
 'NFLAG_INSURED_ON_APPROVAL': {0: 0.75, 1: 0.0, 2: 0.5, 3: 0.0},
 'APP_CREDIT_PERC': {0: 0.6465619960269089,
  1: 0.6814617237435048,
  2: 1.0071037466708934,
  3: 1.0},
 'NAME_CONTRACT_TYPE_Cash loans': {0: False, 1: False, 2: True, 3: False},
 'NAME_CONTRACT_TYPE_Consumer loans': {0: True, 1: True, 2: False, 3: True},
 'NAME_CONTRACT_TYPE_Revolving loans': {0: False,
  1: False,
  2: False,
  3: False},
 'NAME_CONTRACT_TYPE_XNA': {0: False, 1: False, 2: False, 3: False},
 'NAME_CONTRACT_TYPE_nan': {0: False, 1: False, 2: False, 3: False},
 'FLAG_LAST_APPL_PER_CONTRACT_N': {0: False, 1: False, 2: False, 3: False},
 'FLAG_LAST_APPL_PER_CONTRACT_Y': {0: True, 1: True, 2: True, 3: True},
 'FLAG_LAST_APPL_PER_CONTRACT_nan': {0: False, 1: False, 2: False, 3: False},
 'NAME_CASH_LOAN_PURPOSE_Building a house or an annex': {0: False,
  1: False,
  2: False,
  3: False},
 'NAME_CASH_LOAN_PURPOSE_Business development': {0: False,
  1: False,
  2: False,
  3: False},
 'NAME_CASH_LOAN_PURPOSE_Buying a garage': {0: False,
  1: False,
  2: False,
  3: False},
 'NAME_CASH_LOAN_PURPOSE_Buying a holiday home / land': {0: False,
  1: False,
  2: False,
  3: False},
 'NAME_CASH_LOAN_PURPOSE_Buying a home': {0: False,
  1: False,
  2: False,
  3: False},
 'NAME_CASH_LOAN_PURPOSE_Buying a new car': {0: False,
  1: False,
  2: False,
  3: False},
 'NAME_CASH_LOAN_PURPOSE_Buying a used car': {0: False,
  1: False,
  2: False,
  3: False},
 'NAME_CASH_LOAN_PURPOSE_Car repairs': {0: False,
  1: False,
  2: False,
  3: False},
 'NAME_CASH_LOAN_PURPOSE_Education': {0: False, 1: False, 2: False, 3: False},
 'NAME_CASH_LOAN_PURPOSE_Everyday expenses': {0: False,
  1: False,
  2: False,
  3: False},
 'NAME_CASH_LOAN_PURPOSE_Furniture': {0: False, 1: False, 2: False, 3: False},
 'NAME_CASH_LOAN_PURPOSE_Gasification / water supply': {0: False,
  1: False,
  2: False,
  3: False},
 'NAME_CASH_LOAN_PURPOSE_Hobby': {0: False, 1: False, 2: False, 3: False},
 'NAME_CASH_LOAN_PURPOSE_Journey': {0: False, 1: False, 2: False, 3: False},
 'NAME_CASH_LOAN_PURPOSE_Medicine': {0: False, 1: False, 2: False, 3: False},
 'NAME_CASH_LOAN_PURPOSE_Money for a third person': {0: False,
  1: False,
  2: False,
  3: False},
 'NAME_CASH_LOAN_PURPOSE_Other': {0: False, 1: False, 2: False, 3: False},
 'NAME_CASH_LOAN_PURPOSE_Payments on other loans': {0: False,
  1: False,
  2: False,
  3: False},
 'NAME_CASH_LOAN_PURPOSE_Purchase of electronic equipment': {0: False,
  1: False,
  2: False,
  3: False},
 'NAME_CASH_LOAN_PURPOSE_Refusal to name the goal': {0: False,
  1: False,
  2: False,
  3: False},
 'NAME_CASH_LOAN_PURPOSE_Repairs': {0: False, 1: False, 2: False, 3: False},
 'NAME_CASH_LOAN_PURPOSE_Urgent needs': {0: False,
  1: False,
  2: False,
  3: False},
 'NAME_CASH_LOAN_PURPOSE_Wedding / gift / holiday': {0: False,
  1: False,
  2: False,
  3: False},
 'NAME_CASH_LOAN_PURPOSE_XAP': {0: True, 1: True, 2: False, 3: True},
 'NAME_CASH_LOAN_PURPOSE_XNA': {0: False, 1: False, 2: True, 3: False},
 'NAME_CASH_LOAN_PURPOSE_nan': {0: False, 1: False, 2: False, 3: False},
 'NAME_CONTRACT_STATUS_Approved': {0: True, 1: True, 2: True, 3: True},
 'NAME_CONTRACT_STATUS_Canceled': {0: False, 1: False, 2: False, 3: False},
 'NAME_CONTRACT_STATUS_Refused': {0: False, 1: False, 2: False, 3: False},
 'NAME_CONTRACT_STATUS_Unused offer': {0: False, 1: False, 2: False, 3: False},
 'NAME_CONTRACT_STATUS_nan': {0: False, 1: False, 2: False, 3: False},
 'NAME_PAYMENT_TYPE_Cash through the bank': {0: True,
  1: False,
  2: True,
  3: True},
 'NAME_PAYMENT_TYPE_Cashless from the account of the employer': {0: False,
  1: False,
  2: False,
  3: False},
 'NAME_PAYMENT_TYPE_Non-cash from your account': {0: False,
  1: False,
  2: False,
  3: False},
 'NAME_PAYMENT_TYPE_XNA': {0: False, 1: True, 2: False, 3: False},
 'NAME_PAYMENT_TYPE_nan': {0: False, 1: False, 2: False, 3: False},
 'CODE_REJECT_REASON_CLIENT': {0: False, 1: False, 2: False, 3: False},
 'CODE_REJECT_REASON_HC': {0: False, 1: False, 2: False, 3: False},
 'CODE_REJECT_REASON_LIMIT': {0: False, 1: False, 2: False, 3: False},
 'CODE_REJECT_REASON_SCO': {0: False, 1: False, 2: False, 3: False},
 'CODE_REJECT_REASON_SCOFR': {0: False, 1: False, 2: False, 3: False},
 'CODE_REJECT_REASON_SYSTEM': {0: False, 1: False, 2: False, 3: False},
 'CODE_REJECT_REASON_VERIF': {0: False, 1: False, 2: False, 3: False},
 'CODE_REJECT_REASON_XAP': {0: True, 1: True, 2: True, 3: True},
 'CODE_REJECT_REASON_XNA': {0: False, 1: False, 2: False, 3: False},
 'CODE_REJECT_REASON_nan': {0: False, 1: False, 2: False, 3: False},
 'NAME_CLIENT_TYPE_New': {0: False, 1: True, 2: False, 3: True},
 'NAME_CLIENT_TYPE_Refreshed': {0: True, 1: False, 2: False, 3: False},
 'NAME_CLIENT_TYPE_Repeater': {0: False, 1: False, 2: True, 3: False},
 'NAME_CLIENT_TYPE_XNA': {0: False, 1: False, 2: False, 3: False},
 'NAME_CLIENT_TYPE_nan': {0: False, 1: False, 2: False, 3: False},
 'NAME_GOODS_CATEGORY_Additional Service': {0: False,
  1: False,
  2: False,
  3: False},
 'NAME_GOODS_CATEGORY_Audio/Video': {0: False, 1: True, 2: False, 3: False},
 'NAME_GOODS_CATEGORY_Auto Accessories': {0: False,
  1: False,
  2: False,
  3: False},
 'NAME_GOODS_CATEGORY_Clothing and Accessories': {0: False,
  1: False,
  2: False,
  3: False},
 'NAME_GOODS_CATEGORY_Computers': {0: False, 1: False, 2: False, 3: False},
 'NAME_GOODS_CATEGORY_Construction Materials': {0: False,
  1: False,
  2: False,
  3: False},
 'NAME_GOODS_CATEGORY_Consumer Electronics': {0: False,
  1: False,
  2: False,
  3: True},
 'NAME_GOODS_CATEGORY_Direct Sales': {0: False, 1: False, 2: False, 3: False},
 'NAME_GOODS_CATEGORY_Education': {0: False, 1: False, 2: False, 3: False},
 'NAME_GOODS_CATEGORY_Fitness': {0: False, 1: False, 2: False, 3: False},
 'NAME_GOODS_CATEGORY_Furniture': {0: False, 1: False, 2: False, 3: False},
 'NAME_GOODS_CATEGORY_Gardening': {0: False, 1: False, 2: False, 3: False},
 'NAME_GOODS_CATEGORY_Homewares': {0: False, 1: False, 2: False, 3: False},
 'NAME_GOODS_CATEGORY_Insurance': {0: False, 1: False, 2: False, 3: False},
 'NAME_GOODS_CATEGORY_Jewelry': {0: False, 1: False, 2: False, 3: False},
 'NAME_GOODS_CATEGORY_Medical Supplies': {0: False,
  1: False,
  2: False,
  3: False},
 'NAME_GOODS_CATEGORY_Medicine': {0: False, 1: False, 2: False, 3: False},
 'NAME_GOODS_CATEGORY_Mobile': {0: False, 1: False, 2: False, 3: False},
 'NAME_GOODS_CATEGORY_Office Appliances': {0: False,
  1: False,
  2: False,
  3: False},
 'NAME_GOODS_CATEGORY_Other': {0: False, 1: False, 2: False, 3: False},
 'NAME_GOODS_CATEGORY_Photo / Cinema Equipment': {0: False,
  1: False,
  2: False,
  3: False},
 'NAME_GOODS_CATEGORY_Sport and Leisure': {0: False,
  1: False,
  2: False,
  3: False},
 'NAME_GOODS_CATEGORY_Tourism': {0: False, 1: False, 2: False, 3: False},
 'NAME_GOODS_CATEGORY_Vehicles': {0: False, 1: False, 2: False, 3: False},
 'NAME_GOODS_CATEGORY_Weapon': {0: False, 1: False, 2: False, 3: False},
 'NAME_GOODS_CATEGORY_XNA': {0: True, 1: False, 2: True, 3: False},
 'NAME_GOODS_CATEGORY_nan': {0: False, 1: False, 2: False, 3: False},
 'NAME_PORTFOLIO_Cards': {0: False, 1: False, 2: False, 3: False},
 'NAME_PORTFOLIO_Cars': {0: False, 1: False, 2: False, 3: False},
 'NAME_PORTFOLIO_Cash': {0: False, 1: False, 2: True, 3: False},
 'NAME_PORTFOLIO_POS': {0: True, 1: True, 2: False, 3: True},
 'NAME_PORTFOLIO_XNA': {0: False, 1: False, 2: False, 3: False},
 'NAME_PORTFOLIO_nan': {0: False, 1: False, 2: False, 3: False},
 'NAME_PRODUCT_TYPE_XNA': {0: True, 1: True, 2: True, 3: True},
 'NAME_PRODUCT_TYPE_walk-in': {0: False, 1: False, 2: False, 3: False},
 'NAME_PRODUCT_TYPE_x-sell': {0: False, 1: False, 2: False, 3: False},
 'NAME_PRODUCT_TYPE_nan': {0: False, 1: False, 2: False, 3: False},
 'CHANNEL_TYPE_AP+ (Cash loan)': {0: False, 1: False, 2: True, 3: False},
 'CHANNEL_TYPE_Car dealer': {0: False, 1: False, 2: False, 3: False},
 'CHANNEL_TYPE_Channel of corporate sales': {0: False,
  1: False,
  2: False,
  3: False},
 'CHANNEL_TYPE_Contact center': {0: False, 1: False, 2: False, 3: False},
 'CHANNEL_TYPE_Country-wide': {0: True, 1: False, 2: False, 3: True},
 'CHANNEL_TYPE_Credit and cash offices': {0: False,
  1: False,
  2: False,
  3: False},
 'CHANNEL_TYPE_Regional / Local': {0: False, 1: False, 2: False, 3: False},
 'CHANNEL_TYPE_Stone': {0: False, 1: True, 2: False, 3: False},
 'CHANNEL_TYPE_nan': {0: False, 1: False, 2: False, 3: False},
 'NAME_SELLER_INDUSTRY_Auto technology': {0: False,
  1: False,
  2: False,
  3: False},
 'NAME_SELLER_INDUSTRY_Clothing': {0: False, 1: False, 2: False, 3: False},
 'NAME_SELLER_INDUSTRY_Connectivity': {0: False, 1: False, 2: False, 3: False},
 'NAME_SELLER_INDUSTRY_Construction': {0: False, 1: False, 2: False, 3: False},
 'NAME_SELLER_INDUSTRY_Consumer electronics': {0: False,
  1: True,
  2: False,
  3: True},
 'NAME_SELLER_INDUSTRY_Furniture': {0: False, 1: False, 2: False, 3: False},
 'NAME_SELLER_INDUSTRY_Industry': {0: False, 1: False, 2: False, 3: False},
 'NAME_SELLER_INDUSTRY_Jewelry': {0: False, 1: False, 2: False, 3: False},
 'NAME_SELLER_INDUSTRY_MLM partners': {0: False, 1: False, 2: False, 3: False},
 'NAME_SELLER_INDUSTRY_Tourism': {0: False, 1: False, 2: False, 3: False},
 'NAME_SELLER_INDUSTRY_XNA': {0: True, 1: False, 2: True, 3: False},
 'NAME_SELLER_INDUSTRY_nan': {0: False, 1: False, 2: False, 3: False},
 'NAME_YIELD_GROUP_XNA': {0: False, 1: False, 2: False, 3: False},
 'NAME_YIELD_GROUP_high': {0: True, 1: False, 2: True, 3: False},
 'NAME_YIELD_GROUP_low_action': {0: False, 1: False, 2: False, 3: True},
 'NAME_YIELD_GROUP_low_normal': {0: False, 1: False, 2: False, 3: False},
 'NAME_YIELD_GROUP_middle': {0: False, 1: True, 2: False, 3: False},
 'NAME_YIELD_GROUP_nan': {0: False, 1: False, 2: False, 3: False},
 'PRODUCT_COMBINATION_Card Street': {0: False, 1: False, 2: False, 3: False},
 'PRODUCT_COMBINATION_Card X-Sell': {0: True, 1: False, 2: False, 3: False},
 'PRODUCT_COMBINATION_Cash': {0: False, 1: False, 2: True, 3: False},
 'PRODUCT_COMBINATION_Cash Street: high': {0: False,
  1: False,
  2: False,
  3: False},
 'PRODUCT_COMBINATION_Cash Street: low': {0: False,
  1: False,
  2: False,
  3: False},
 'PRODUCT_COMBINATION_Cash Street: middle': {0: False,
  1: False,
  2: False,
  3: False},
 'PRODUCT_COMBINATION_Cash X-Sell: high': {0: False,
  1: False,
  2: False,
  3: False},
 'PRODUCT_COMBINATION_Cash X-Sell: low': {0: False,
  1: False,
  2: False,
  3: False},
 'PRODUCT_COMBINATION_Cash X-Sell: middle': {0: False,
  1: False,
  2: False,
  3: False},
 'PRODUCT_COMBINATION_POS household with interest': {0: False,
  1: True,
  2: False,
  3: False},
 'PRODUCT_COMBINATION_POS household without interest': {0: False,
  1: False,
  2: False,
  3: True},
 'PRODUCT_COMBINATION_POS industry with interest': {0: False,
  1: False,
  2: False,
  3: False},
 'PRODUCT_COMBINATION_POS industry without interest': {0: False,
  1: False,
  2: False,
  3: False},
 'PRODUCT_COMBINATION_POS mobile with interest': {0: False,
  1: False,
  2: False,
  3: False},
 'PRODUCT_COMBINATION_POS mobile without interest': {0: False,
  1: False,
  2: False,
  3: False},
 'PRODUCT_COMBINATION_POS other with interest': {0: False,
  1: False,
  2: False,
  3: False},
 'PRODUCT_COMBINATION_POS others without interest': {0: False,
  1: False,
  2: False,
  3: False},
 'PRODUCT_COMBINATION_nan': {0: False, 1: False, 2: False, 3: False},
 'CNT_INSTALMENT': {0: 15.73913043478261,
  1: 11.083333333333334,
  2: 12.55,
  3: 24.0},
 'CNT_INSTALMENT_FUTURE': {0: 8.804347826086957,
  1: 5.541666666666667,
  2: 6.675,
  3: 15.0},
 'SK_DPD': {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0},
 'SK_DPD_DEF': {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0},
 'NAME_CONTRACT_STATUS_Active': {0: True, 1: True, 2: True, 3: True},
 'NAME_CONTRACT_STATUS_Amortized debt': {0: False,
  1: False,
  2: False,
  3: False},
 'NAME_CONTRACT_STATUS_Completed': {0: False, 1: False, 2: False, 3: False},
 'NAME_CONTRACT_STATUS_Demand': {0: False, 1: False, 2: False, 3: False},
 'NAME_CONTRACT_STATUS_Returned to the store': {0: False,
  1: False,
  2: False,
  3: False},
 'NAME_CONTRACT_STATUS_Signed': {0: False, 1: False, 2: False, 3: False},
 'NUM_INSTALMENT_VERSION': {0: 1.024390243902439,
  1: 0.3548387096774194,
  2: 1.1176470588235294,
  3: 1.0},
 'NUM_INSTALMENT_NUMBER': {0: 7.829268292682927,
  1: 15.370967741935484,
  2: 6.676470588235294,
  3: 10.0},
 'DAYS_INSTALMENT': {0: -933.5365853658536,
  1: -832.4677419354839,
  2: -1608.9411764705883,
  3: -294.0},
 'DAYS_ENTRY_PAYMENT': {0: -942.1219512195122,
  1: -840.016129032258,
  2: -1630.4117647058824,
  3: -337.05263157894734},
 'AMT_INSTALMENT': {0: 12073.934634146342,
  1: 4086.016693548387,
  2: 11333.408823529411,
  3: 3598.155},
 'AMT_PAYMENT': {0: 12073.934634146342,
  1: 4086.016693548387,
  2: 11333.408823529411,
  3: 3598.155},
 'PAYMENT_PERC': {0: 1.0, 1: 1.0, 2: 1.0, 3: 1.0},
 'PAYMENT_DIFF': {0: 0.0, 1: 0.0, 2: 0.0, 3: 0.0},
 'DPD': {0: 0.024390243902439, 1: 0.0, 2: 0.0, 3: 0.0},
 'DBD': {0: 8.609756097560975,
  1: 7.548387096774194,
  2: 21.47058823529412,
  3: 43.05263157894737},
 'AMT_BALANCE': {0: 0.0, 1: 139216.527, 2: np.nan, 3: np.nan},
 'AMT_CREDIT_LIMIT_ACTUAL': {0: 270000.0, 1: 297000.0, 2: np.nan, 3: np.nan},
 'AMT_DRAWINGS_ATM_CURRENT': {0: np.nan, 1: 9900.0, 2: np.nan, 3: np.nan},
 'AMT_DRAWINGS_CURRENT': {0: 0.0, 1: 9900.0, 2: np.nan, 3: np.nan},
 'AMT_DRAWINGS_OTHER_CURRENT': {0: np.nan, 1: 0.0, 2: np.nan, 3: np.nan},
 'AMT_DRAWINGS_POS_CURRENT': {0: np.nan, 1: 0.0, 2: np.nan, 3: np.nan},
 'AMT_INST_MIN_REGULARITY': {0: 0.0, 1: 0.0, 2: np.nan, 3: np.nan},
 'AMT_PAYMENT_CURRENT': {0: np.nan, 1: 10098.947368421052, 2: np.nan, 3: np.nan},
 'AMT_PAYMENT_TOTAL_CURRENT': {0: 0.0, 1: 9594.0, 2: np.nan, 3: np.nan},
 'AMT_RECEIVABLE_PRINCIPAL': {0: 0.0, 1: 135226.36575, 2: np.nan, 3: np.nan},
 'AMT_RECIVABLE': {0: 0.0, 1: 138605.81175, 2: np.nan, 3: np.nan},
 'AMT_TOTAL_RECEIVABLE': {0: 0.0, 1: 138605.81175, 2: np.nan, 3: np.nan},
 'CNT_DRAWINGS_ATM_CURRENT': {0: np.nan, 1: 0.5, 2: np.nan, 3: np.nan},
 'CNT_DRAWINGS_CURRENT': {0: 0.0, 1: 0.5, 2: np.nan, 3: np.nan},
 'CNT_DRAWINGS_OTHER_CURRENT': {0: np.nan, 1: 0.0, 2: np.nan, 3: np.nan},
 'CNT_DRAWINGS_POS_CURRENT': {0: np.nan, 1: 0.0, 2: np.nan, 3: np.nan},
 'CNT_INSTALMENT_MATURE_CUM': {0: 0.0, 1: 9.5, 2: np.nan, 3: np.nan},
 'CC_COUNT': {0: 31.0, 1: 20.0, 2: np.nan, 3: np.nan}}

def make_prediction(file):
    # Créer un objet FormData pour envoyer le fichier 
    files={'file': ("test.csv", file)}

    # Envoyer la requête à votre API Flask
    response = requests.post(f"{api_url}/predict", files=files)
    
    # Gérer la réponse JSON
    if response.status_code == 200:
        # Utilisez BeautifulSoup pour extraire les informations
        soup = BeautifulSoup(response.text, 'html.parser')

        # Sélectionnez toutes les lignes du tableau
        rows = soup.find_all('tr')
        
        # Initialisez des listes pour stocker les numéros et les états
        numeros = []
        ids = []
        probas = []
        etats = []

        # Parcourez les lignes (à partir de la deuxième ligne, car la première est l'en-tête)
        for row in rows[1:]:
            # Sélectionnez toutes les cellules de la ligne
            cells = row.find_all('td')
            
            # Récupérez les données des cellules
            numero = cells[0].get_text(strip=True)
            client_id = cells[1].get_text(strip=True)
            proba = cells[2].get_text(strip=True)
            etat = cells[3].get_text(strip=True)
            
            # Ajoutez les données aux listes
            numeros.append(numero)
            ids.append(client_id)
            probas.append(proba)
            etats.append(etat)

        return numeros, ids, probas, etats

    else:
        return {"error": f"Erreur de la requête : {response.status_code}"}

def main():
    st.title("Interface de Test de l'API")

    df = pd.DataFrame(data)

    csv_data = df.to_csv(index=False)

    # Afficher les premières lignes du DataFrame
    st.dataframe(df.head())

    # Bouton pour faire une prédiction
    if st.button("Faire une prédiction"):
        # Faire la prédiction en utilisant l'API
        nums, ids, probas, predictions = make_prediction(csv_data)

        # Créez un dictionnaire avec vos données
        data_response = {'Numéro': nums, 'ID': ids, 'Proba (%)': probas, 'Résultat': predictions}

        # Créez un DataFrame pandas à partir du dictionnaire
        df_results = pd.DataFrame(data_response)
        df_results.set_index('Numéro', inplace=True)

        # Afficher la prédiction
        st.write("Résultat de la prédiction :")
        # Affichez le DataFrame dans un tableau
        st.write(df_results)

if __name__ == "__main__":
    main()
